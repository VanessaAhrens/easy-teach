(this["webpackJsonpm3-react-typescript"]=this["webpackJsonpm3-react-typescript"]||[]).push([[0],{124:function(e,n,t){e.exports=t(226)},129:function(e,n,t){},224:function(e,n){},226:function(e,n,t){"use strict";t.r(n);var a,l=t(0),s=t.n(l),o=t(76),r=t.n(o),i=(t(129),t(11)),u=t(12),c=t(21),d=t(19),h=t(20),p=t(34),m=function(e){return l.createElement("nav",null,l.createElement("ul",null,l.createElement("li",null,l.createElement(p.a,{exact:!0,to:"/"},"Login")),l.createElement("li",null,l.createElement(p.a,{to:"/register"},"Register")),l.createElement("li",null,l.createElement(p.a,{to:"/showlessons"},"Lessons"))))};!function(e){e.INIT="@@INIT",e.login_error="login_error",e.user_logged_in="user_logged_in",e.user_logged_out="user_logged_out",e.update_user="update_user",e.user_created="user_created",e.user_exists="user_exists",e.create_lesson="create_lesson",e.update_lesson="update_lesson",e.delete_lesson="delete_lesson",e.render_test="render_test",e.server_called="server_called",e.lesson_updated="lesson_updated",e.add_lessons_from_server="add_lessons_from_server"}(a||(a={}));var g=t(13),v=t.n(g),w={UI:{counter:0,loggedIn:!1,waitingForResponse:!1,Login:{errorMessage:""}},BM:{user:{firstname:"",lastname:"",username:"",password:""},lessons:[]}},_={},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,n=arguments.length>1?arguments[1]:void 0;window.CS.log("2. ACTION:"+n.type);var t=JSON.parse(JSON.stringify(e));t.UI.counter=e.UI.counter+1;var l=_[n.type];if(void 0!==l)return l(t,n),t;switch(n.type){case a.INIT:return t;default:return window.CS.log("1. Error!!!!! no reducer defined"),t}},E=t(14),S=Object(E.a)();_[a.login_error]=function(e,n){return e.UI.waitingForResponse=!1,e.UI.Login.errorMessage=n.errorMessage,e},_[a.user_logged_in]=function(e,n){return e.UI.waitingForResponse=!1,e.UI.Login.errorMessage="",e.UI.loggedIn=!0,e.BM.user=n.user,e},_[a.user_logged_out]=function(e,n){return e.UI.waitingForResponse=!1,e.UI.Login.errorMessage="",e.UI.loggedIn=!1,e.BM.user={lastname:"",firstname:"",username:"",password:""},e};var b=function(e){function n(){return Object(i.a)(this,n),Object(c.a)(this,Object(d.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){return window.CS.getUIState().loggedIn?s.a.createElement("div",null,s.a.createElement("p",null,"You are logged in as ",window.CS.getBMState().user.username),s.a.createElement("button",{className:"btn btn-primary",onClick:this.handleLogout},"Logout")):s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",{htmlFor:"username"},"Username:"),s.a.createElement("input",{type:"username",placeholder:"Your username",onChange:this.handleUsernameChange,value:window.CS.getBMState().user.username}),s.a.createElement("br",null),s.a.createElement("label",{htmlFor:"password"},"Password:"),s.a.createElement("input",{type:"password",placeholder:"********",onChange:this.handlePasswordChange,value:window.CS.getBMState().user.password}),s.a.createElement("br",null),s.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Login"})),s.a.createElement("p",null,window.CS.getUIState().Login.errorMessage))}},{key:"handleUsernameChange",value:function(e){var n=window.CS.getBMState().user;n.username=e.target.value;var t={type:a.update_user,user:n};window.CS.clientAction(t)}},{key:"handlePasswordChange",value:function(e){var n=window.CS.getBMState().user;n.password=e.target.value;var t={type:a.update_user,user:n};window.CS.clientAction(t)}},{key:"handleSubmit",value:function(e){e.preventDefault();var n={type:a.server_called};window.CS.clientAction(n),v.a.post("/auth/login",window.CS.getBMState().user).then((function(e){var n=e.data;if(console.log(n),n.errorMessage){var t={type:a.login_error,errorMessage:n.errorMessage};window.CS.clientAction(t)}else{var l={type:a.user_logged_in,user:n};window.CS.clientAction(l),S.push("/showlessons")}}))}},{key:"handleLogout",value:function(){var e={type:a.server_called};window.CS.clientAction(e),v.a.get("/auth/logout").then((function(e){var n={type:a.user_logged_out};window.CS.clientAction(n)}))}}]),n}(l.Component);_[a.update_user]=function(e,n){return console.log(n.user),e.BM.user=n.user,e},_[a.user_created]=function(e,n){return console.log(n.user),e.UI.waitingForResponse=!1,e.UI.loggedIn=!0,e};var f=function(e){function n(){return Object(i.a)(this,n),Object(c.a)(this,Object(d.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",{htmlFor:"firstname"},"First name:"),s.a.createElement("input",{type:"text",placeholder:"firstname",onChange:this.handleFirstnameChange,value:window.CS.getBMState().user.firstname}),s.a.createElement("br",null),s.a.createElement("label",{htmlFor:"lastname"},"Last name:"),s.a.createElement("input",{type:"text",placeholder:"lastname",onChange:this.handleLastnameChange,value:window.CS.getBMState().user.lastname}),s.a.createElement("br",null),s.a.createElement("label",{htmlFor:"username"},"Username:"),s.a.createElement("input",{type:"username",placeholder:"Your username",onChange:this.handleUsernameChange,value:window.CS.getBMState().user.username}),s.a.createElement("br",null),s.a.createElement("label",{htmlFor:"password"},"Password:"),s.a.createElement("input",{type:"password",placeholder:"********",onChange:this.handlePasswordChange,value:window.CS.getBMState().user.password}),s.a.createElement("br",null),s.a.createElement("input",{type:"submit",value:"Register as new User"})))}},{key:"handleFirstnameChange",value:function(e){var n=window.CS.getBMState().user;n.firstname=e.target.value;var t={type:a.update_user,user:n};window.CS.clientAction(t)}},{key:"handleLastnameChange",value:function(e){var n=window.CS.getBMState().user;n.lastname=e.target.value;var t={type:a.update_user,user:n};window.CS.clientAction(t)}},{key:"handleUsernameChange",value:function(e){var n=window.CS.getBMState().user;n.username=e.target.value;var t={type:a.update_user,user:n};window.CS.clientAction(t)}},{key:"handlePasswordChange",value:function(e){var n=window.CS.getBMState().user;n.password=e.target.value;var t={type:a.update_user,user:n};window.CS.clientAction(t)}},{key:"handleSubmit",value:function(e){e.preventDefault();var n={type:a.server_called};window.CS.clientAction(n),v.a.post("/auth/signup",window.CS.getBMState().user).then((function(e){var n={type:a.user_created};S.push("/"),window.CS.clientAction(n),console.log(e.data)}))}}]),n}(l.Component),y=t(7);_[a.lesson_updated]=function(e,n){e.UI.waitingForResponse=!1},_[a.update_lesson]=function(e,n){var t=e.BM.lessons.filter((function(e){return e._id===n.lesson._id}));return console.log(t),t[0].lesson_name=n.lesson.lesson_name,t[0].lesson_duration=n.lesson.lesson_duration,t[0].lesson_location=n.lesson.lesson_location,t[0].lesson_price=n.lesson.lesson_price,t[0].lesson_equip=n.lesson.lesson_equip,t[0].lesson_language=n.lesson.lesson_language,t[0].lesson_amountPeople=n.lesson.lesson_amountPeople,t[0].lesson_eMailTeacher=n.lesson.lesson_eMailTeacher,t[0].lesson_aboutTeacher=n.lesson.lesson_aboutTeacher,t},_[a.delete_lesson]=function(e,n){var t=e.BM.lessons.filter((function(e){return e._id!==n.lesson._id}));return e.BM.lessons=t,e};var O=function(e){function n(e){var t;return Object(i.a)(this,n),(t=Object(c.a)(this,Object(d.a)(n).call(this,e))).handleSwitchToEditMode=t.handleSwitchToEditMode.bind(Object(y.a)(t)),t.handleNameChange=t.handleNameChange.bind(Object(y.a)(t)),t.handleDurationChange=t.handleDurationChange.bind(Object(y.a)(t)),t.handleLocationChange=t.handleLocationChange.bind(Object(y.a)(t)),t.handlePriceChange=t.handlePriceChange.bind(Object(y.a)(t)),t.handleEquipChange=t.handleEquipChange.bind(Object(y.a)(t)),t.handleLanguageChange=t.handleLanguageChange.bind(Object(y.a)(t)),t.handleAmountPeopleChange=t.handleAmountPeopleChange.bind(Object(y.a)(t)),t.handleEmailTeacherChange=t.handleEmailTeacherChange.bind(Object(y.a)(t)),t.handleAboutTeacherChange=t.handleAboutTeacherChange.bind(Object(y.a)(t)),t.handleSave=t.handleSave.bind(Object(y.a)(t)),t.handleRerenderTest=t.handleRerenderTest.bind(Object(y.a)(t)),t.handleDelete=t.handleDelete.bind(Object(y.a)(t)),t.state={edit_mode:e.edit},t}return Object(h.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){return this.state.edit_mode?s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("input",{type:"text",name:"name",value:this.props.lesson.lesson_name,onChange:this.handleNameChange})),s.a.createElement("td",null,s.a.createElement("input",{type:"text",name:"duration",value:this.props.lesson.lesson_duration,onChange:this.handleDurationChange})),s.a.createElement("td",null,s.a.createElement("input",{type:"text",name:"location",value:this.props.lesson.lesson_location,onChange:this.handleLocationChange})),s.a.createElement("td",null,s.a.createElement("input",{type:"text",name:"name",value:this.props.lesson.lesson_price,onChange:this.handlePriceChange})),s.a.createElement("td",null,s.a.createElement("input",{type:"text",name:"name",value:this.props.lesson.lesson_equip,onChange:this.handleEquipChange})),s.a.createElement("td",null,s.a.createElement("input",{type:"text",name:"name",value:this.props.lesson.lesson_language,onChange:this.handleLanguageChange})),s.a.createElement("td",null,s.a.createElement("input",{type:"text",name:"name",value:this.props.lesson.lesson_amountPeople,onChange:this.handleAmountPeopleChange})),s.a.createElement("td",null,s.a.createElement("input",{type:"text",name:"name",value:this.props.lesson.lesson_eMailTeacher,onChange:this.handleEmailTeacherChange})),s.a.createElement("td",null,s.a.createElement("input",{type:"text",name:"name",value:this.props.lesson.lesson_aboutTeacher,onChange:this.handleAboutTeacherChange})),s.a.createElement("td",null,s.a.createElement("button",{onClick:this.handleSave,id:this.props.lesson._id},"save"),s.a.createElement("button",{onClick:this.handleRerenderTest},"increase State Counter"))):s.a.createElement("tr",null,s.a.createElement("td",null,this.props.lesson.lesson_name),s.a.createElement("td",null,this.props.lesson.lesson_duration," Minuten"),s.a.createElement("td",null,this.props.lesson.lesson_location," "),s.a.createElement("td",null,this.props.lesson.lesson_price," \u20ac"),s.a.createElement("td",null,this.props.lesson.lesson_equip," "),s.a.createElement("td",null,this.props.lesson.lesson_language," "),s.a.createElement("td",null,this.props.lesson.lesson_amountPeople," "),s.a.createElement("td",null,this.props.lesson.lesson_eMailTeacher," "),s.a.createElement("td",null,this.props.lesson.lesson_aboutTeacher," "),s.a.createElement("td",null,s.a.createElement("button",{onClick:this.handleSwitchToEditMode},"edit"),s.a.createElement("button",{onClick:this.handleDelete,id:this.props.lesson._id},"sell or dispose"),s.a.createElement("button",{onClick:this.handleRerenderTest},"increase State Counter ",window.CS.getUIState().counter)))}},{key:"handleSwitchToEditMode",value:function(){this.setState({edit_mode:!0})}},{key:"handleNameChange",value:function(e){var n=this.props.lesson;n.lesson_name=e.target.value;var t={type:a.update_lesson,lesson:n};window.CS.clientAction(t)}},{key:"handleDurationChange",value:function(e){var n=this.props.lesson;n.lesson_duration=e.target.value;var t={type:a.update_lesson,lesson:n};window.CS.clientAction(t)}},{key:"handleLocationChange",value:function(e){var n=this.props.lesson;n.lesson_location=e.target.value;var t={type:a.update_lesson,lesson:n};window.CS.clientAction(t)}},{key:"handlePriceChange",value:function(e){var n=this.props.lesson;n.lesson_price=e.target.value;var t={type:a.update_lesson,lesson:n};window.CS.clientAction(t)}},{key:"handleEquipChange",value:function(e){var n=this.props.lesson;n.lesson_equip=e.target.value;var t={type:a.update_lesson,lesson:n};window.CS.clientAction(t)}},{key:"handleLanguageChange",value:function(e){var n=this.props.lesson;n.lesson_language=e.target.value;var t={type:a.update_lesson,lesson:n};window.CS.clientAction(t)}},{key:"handleAmountPeopleChange",value:function(e){var n=this.props.lesson;n.lesson_amountPeople=e.target.value;var t={type:a.update_lesson,lesson:n};window.CS.clientAction(t)}},{key:"handleEmailTeacherChange",value:function(e){var n=this.props.lesson;n.lesson_eMailTeacher=e.target.value;var t={type:a.update_lesson,lesson:n};window.CS.clientAction(t)}},{key:"handleAboutTeacherChange",value:function(e){var n=this.props.lesson;n.lesson_aboutTeacher=e.target.value;var t={type:a.update_lesson,lesson:n};window.CS.clientAction(t)}},{key:"handleSave",value:function(e){this.setState({edit_mode:!1});var n={type:a.server_called};window.CS.clientAction(n),v.a.put("/lessons/update/"+this.props.lesson._id,this.props.lesson).then((function(e){console.log(e);var n={type:a.lesson_updated};window.CS.clientAction(n)}))}},{key:"handleDelete",value:function(){var e=this,n={type:a.server_called};window.CS.clientAction(n),v.a.post("/lessons/delete/"+this.props.lesson._id).then((function(n){var t={type:a.delete_lesson,lesson:e.props.lesson};window.CS.clientAction(t)}))}},{key:"handleRerenderTest",value:function(e){var n={type:a.render_test};window.CS.clientAction(n)}}]),n}(s.a.PureComponent),k=t(122),j=t.n(k);_[a.create_lesson]=function(e,n){return e.BM.lessons.push(n.lesson),e.UI.waitingForResponse=!1,e};var M=function(e){function n(e){var t;return Object(i.a)(this,n),console.log("new App component will be initialized"),(t=Object(c.a)(this,Object(d.a)(n).call(this,e))).handleCreateLesson=t.handleCreateLesson.bind(Object(y.a)(t)),t}return Object(h.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("p",null," ",window.CS.getUIState().waitingForResponse.toString(),window.CS.getUIState().counter),s.a.createElement("h1",null,"simple lesson management application"),s.a.createElement("p",null,"to create a new lesson click this button:\xa0",s.a.createElement("button",{onClick:this.handleCreateLesson},"create lesson")),s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",null,"description"),s.a.createElement("th",null,"duration"),s.a.createElement("th",null,"location"),s.a.createElement("th",null,"price"),s.a.createElement("th",null,"equip"),s.a.createElement("th",null,"language"),s.a.createElement("th",null,"amount of People"),s.a.createElement("th",null,"Email"),s.a.createElement("th",null,"about the Teacher")),window.CS.getBMState().lessons.map((function(e){return s.a.createElement(O,{key:e._id,lesson:e,edit:!1})})))))}},{key:"handleCreateLesson",value:function(){console.log("handleCreateLesson invoked");var e={type:a.server_called};window.CS.clientAction(e);var n={_id:j.a.Types.ObjectId().toString(),lesson_name:"Tennis",lesson_duration:25,lesson_location:"Ingolstadt",lesson_price:35,lesson_equip:"Tennisschl\xe4ger und Tennisschuhe",lesson_language:"deutsch",lesson_amountPeople:"4",lesson_eMailTeacher:"primosch@mediamarktsaturn.com",lesson_aboutTeacher:"Hallo, ich bin der Tennistrainer."},t={type:a.create_lesson,lesson:n};v.a.post("/lessons/add",n).then((function(e){window.CS.clientAction(t),console.log(e.data)}))}}]),n}(l.Component),A=(t(224),function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return(t=Object(c.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(l)))).state={searchQuery:""},t}return Object(h.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"field has-addons",style:{padding:"20px",margin:"20px"}},s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"query",value:this.props.value,onChange:function(n){return e.setState({searchQuerye:n.target.value})},placeholder:"Search For Lesson"})),s.a.createElement("div",{className:"control"},s.a.createElement("a",{className:"button is-info",onClick:function(){return e.props.onSearch(e.state.searchQuery)}},"Search")))}}]),n}(l.Component)),I=t(24);_[a.server_called]=function(e,n){return e.UI.waitingForResponse=!0,e},_[a.add_lessons_from_server]=function(e,n){return e.UI.waitingForResponse=!1,e.BM.lessons=n.lessons,e};var T=function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return(t=Object(c.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(l)))).handleQuery=function(e){v.a.post("/lessons/search",e).then((function(e){console.log(e.data)}))},t}return Object(h.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){var e={type:a.server_called};window.CS.clientAction(e),v.a.get("/lessons/read").then((function(e){console.log("this data was loaded as a result of componentDidMount:"),console.log(e.data);var n={type:a.add_lessons_from_server,lessons:e.data};window.CS.clientAction(n)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return window.CS.log("App --\x3e render()"),s.a.createElement("div",{className:"container-fluid"},".",s.a.createElement(m,null),s.a.createElement(A,{onSearch:this.handleQuery}),s.a.createElement(I.c,null,s.a.createElement(I.a,{path:"/showlessons",component:M}),s.a.createElement(I.a,{path:"/register",component:f}),s.a.createElement(I.a,{path:"/",component:b})))}}]),n}(s.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U,L=t(41),B=t(79);U=window.__REDUX_DEVTOOLS_EXTENSION__?Object(L.b)(Object(L.a)(B.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()):Object(L.a)(B.a);var N=function(){function e(){Object(i.a)(this,e),this.store=void 0}return Object(u.a)(e,[{key:"log",value:function(e){console.log(e)}},{key:"getStore",value:function(){return this.store}},{key:"getState",value:function(){return this.store.getState()}},{key:"getUIState",value:function(){return this.getState().UI}},{key:"getBMState",value:function(){return this.getState().BM}},{key:"initializeStore",value:function(){this.store=Object(L.c)(C,U)}},{key:"clientAction",value:function(e){this.store.dispatch(e)}},{key:"getDBServerURL_test",value:function(){return"http://localhost:8080"}}]),e}();window.CS=new N,window.CS.initializeStore(),r.a.render(s.a.createElement(I.b,{history:S},s.a.createElement(T,{stateCounter:window.CS.getUIState().counter})),document.getElementById("root")),window.CS.getStore().subscribe((function(){window.CS.log("3. before render ---------------------------------------------"),r.a.render(s.a.createElement(I.b,{history:S},s.a.createElement(T,{stateCounter:window.CS.getUIState().counter})),document.getElementById("root")),window.CS.log("3. after render ---------------------------------------------")})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[124,1,2]]]);
//# sourceMappingURL=main.34035f01.chunk.js.map